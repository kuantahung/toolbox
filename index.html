<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>倍安數位工具箱</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* 卡片互動特效 */
        .tool-card {
            transition: transform 0.2s, box-shadow 0.2s;
            border: none !important;
        }
        
        @media (hover: hover) {
            .tool-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.25);
                filter: brightness(1.05);
            }
        }
        
        .tool-card:active {
            transform: scale(0.98);
        }

        /* 背景圖示設定 */
        .bg-icon {
            pointer-events: none;
        }

        /* 閃爍動畫 (用於即時匯率更新) */
        @keyframes pulse-green {
            0% { color: white; }
            50% { color: #86efac; }
            100% { color: white; }
        }
        .live-update {
            animation: pulse-green 2s infinite;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col text-slate-800 pb-safe">

    <nav class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center">
                    <div class="w-9 h-9 bg-blue-900 rounded-lg flex items-center justify-center text-white mr-2 shadow-sm flex-shrink-0">
                        <i class="fa-solid fa-shield-cat text-lg"></i>
                    </div>
                    <span class="font-bold text-lg md:text-xl text-slate-800 tracking-tight">倍安數位工具箱</span>
                </div>
                
                <div class="hidden md:flex items-center">
                    <span class="text-xs md:text-sm font-medium text-slate-500 bg-slate-50 px-3 py-1 rounded-full border border-slate-100">
                        <i class="fa-solid fa-crosshairs text-blue-600 mr-2"></i>專業賦能 · 精準分析
                    </span>
                </div>
                
                <div class="md:hidden text-slate-400">
                    <i class="fa-solid fa-bars text-xl"></i>
                </div>
            </div>
        </div>
    </nav>

    <main class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-10">
        
        <div class="mb-6 md:mb-10 text-center md:text-left">
            <h1 class="text-[11px] min-[360px]:text-xs sm:text-2xl md:text-3xl font-bold text-slate-900 mb-1 md:mb-2 whitespace-nowrap tracking-tight">Your wealth guidance to the future</h1>
            <p class="text-xs md:text-base text-slate-500">選擇工具開始您的專業規劃</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-4 md:gap-6">

            <a href="https://kuantahung.github.io/Retire-in-Real/" target="_blank" 
               class="tool-card col-span-1 md:col-span-2 lg:col-span-8 group relative overflow-hidden rounded-2xl p-6 md:p-8 shadow-md flex flex-col justify-between min-h-[260px] md:min-h-[280px]"
               style="background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%); color: white;">
                
                <i class="fa-solid fa-umbrella-beach absolute -bottom-6 -right-6 text-9xl md:text-[10rem] text-white opacity-50 group-hover:scale-110 transition-transform duration-500 z-0 bg-icon"></i>
                
                <div class="relative z-10 pt-4">
                    <h2 class="text-2xl md:text-3xl font-bold mb-3 text-white">Retire in Real 退休實境</h2>
                    <p class="text-blue-50 text-sm md:text-lg max-w-2xl leading-relaxed font-light">
                        視覺化退休金缺口。讓客戶看見未來的需求，精準規劃理想老後生活。
                    </p>
                </div>
                
                <div class="relative z-10 mt-6 md:mt-8 flex items-center text-white font-bold text-sm md:text-base">
                    <span>啟動模擬</span>
                    <i class="fa-solid fa-arrow-right-long ml-2 group-hover:translate-x-2 transition-transform"></i>
                </div>
            </a>

            <a href="https://rate.bot.com.tw/xrt" target="_blank" 
               class="tool-card col-span-1 md:col-span-1 lg:col-span-4 rounded-2xl p-6 md:p-8 shadow-md flex flex-col justify-between relative overflow-hidden group"
               style="background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); color: white;">
                
                <i class="fa-solid fa-sack-dollar absolute -bottom-6 -right-6 text-8xl md:text-9xl text-white opacity-20 group-hover:scale-110 transition-transform duration-500 z-0 bg-icon"></i>
                
                <div class="relative z-10">
                    <div class="flex justify-between items-start">
                        <h2 class="text-lg md:text-xl font-bold text-white opacity-90">今日美金匯率</h2>
                        <span class="bg-white/20 text-[10px] px-2 py-1 rounded backdrop-blur-sm">臺灣銀行</span>
                    </div>
                    
                    <div class="mt-4">
                        <p class="text-xs text-purple-200 mb-1">現金賣出 (Cash Sell)</p>
                        <div class="flex items-baseline">
                            <span id="live-rate" class="text-4xl md:text-5xl font-bold text-white tracking-tight">--.--</span>
                            <span class="ml-2 text-sm font-medium text-purple-200">TWD</span>
                        </div>
                        <p id="update-time" class="text-[10px] text-purple-300 mt-2 flex items-center">
                            <i class="fa-solid fa-circle-notch fa-spin mr-1"></i> 數據載入中...
                        </p>
                    </div>
                </div>
                
                <div class="relative z-10 mt-4 flex items-center text-xs font-semibold text-purple-100/80 group-hover:text-white transition-colors">
                    <span>前往台銀公告</span>
                    <i class="fa-solid fa-external-link-alt ml-1"></i>
                </div>
            </a>

            <a href="https://kuantahung.github.io/USD-exchange-rate-history/" target="_blank" 
               class="tool-card col-span-1 md:col-span-1 lg:col-span-4 rounded-2xl p-6 md:p-8 shadow-md flex flex-col justify-between relative overflow-hidden group"
               style="background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%); color: white;">
                
                <i class="fa-solid fa-chart-line absolute -bottom-6 -right-6 text-8xl md:text-9xl text-white opacity-30 group-hover:scale-110 transition-transform duration-500 z-0 bg-icon"></i>
                
                <div class="relative z-10">
                    <h2 class="text-lg md:text-xl font-bold mb-2 text-white">50年匯率走勢</h2>
                    <p class="text-slate-200 text-xs md:text-sm leading-relaxed font-light mb-4">
                        用歷史大數據化解客戶對匯差的疑慮。
                    </p>
                    <span class="bg-white/10 px-3 py-1.5 rounded-lg text-xs backdrop-blur-md border border-white/10">
                        查看歷史圖表
                    </span>
                </div>
            </a>

            <a href="https://kuantahung.github.io/RBC-dashboard/" target="_blank" 
               class="tool-card col-span-1 md:col-span-1 lg:col-span-4 group p-6 rounded-2xl shadow-md relative overflow-hidden flex flex-col justify-between"
               style="background: linear-gradient(135deg, #059669 0%, #10b981 100%); color: white;">
                
                <i class="fa-solid fa-shield-halved absolute -bottom-6 -right-4 text-8xl md:text-9xl text-white opacity-20 group-hover:scale-105 transition-transform duration-500 z-0 bg-icon"></i>
                
                <div class="relative z-10">
                    <h3 class="text-lg md:text-xl font-bold mb-2 text-white">RBC 查詢儀表板</h3>
                    <p class="text-xs md:text-sm text-emerald-50 mb-4 leading-relaxed font-light">各家壽險業資本適足率。</p>
                    <span class="bg-white/10 px-3 py-1.5 rounded-lg text-xs backdrop-blur-md border border-white/10">
                        檢視數據
                    </span>
                </div>
            </a>

            <a href="https://kuantahung.github.io/demographic-changes/" target="_blank" 
               class="tool-card col-span-1 md:col-span-1 lg:col-span-4 group p-6 rounded-2xl shadow-md relative overflow-hidden flex flex-col justify-between"
               style="background: linear-gradient(135deg, #ea580c 0%, #f97316 100%); color: white;">
                
                <i class="fa-solid fa-people-roof absolute -bottom-4 -right-2 text-8xl md:text-9xl text-white opacity-20 group-hover:scale-105 transition-transform duration-500 z-0 bg-icon"></i>
                
                <div class="relative z-10">
                    <h3 class="text-lg md:text-xl font-bold mb-2 text-white">人口結構變遷</h3>
                    <p class="text-xs md:text-sm text-orange-50 mb-4 leading-relaxed font-light">少子化與高齡化數據展示。</p>
                    <span class="bg-white/10 px-3 py-1.5 rounded-lg text-xs backdrop-blur-md border border-white/10">
                        開啟圖表
                    </span>
                </div>
            </a>

        </div>
    </main>

    <footer class="bg-white border-t border-slate-200 mt-auto py-6">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-xs md:text-sm text-slate-400">
                &copy; 2026 Polaris Financial Group. Designed for Excellence.
            </p>
        </div>
    </footer>

    <script>
        async function fetchBotRate() {
            const rateElement = document.getElementById('live-rate');
            const timeElement = document.getElementById('update-time');
            
            try {
                // 技巧：使用 allorigins 作為 CORS Proxy 來讀取台銀的 CSV
                // 加上 timestamp 防止快取，確保拿到最新資料
                const botCsvUrl = 'https://rate.bot.com.tw/xrt/flcsv/0/day';
                const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(botCsvUrl)}&t=${Date.now()}`;
                
                const response = await fetch(proxyUrl);
                
                if (!response.ok) throw new Error('Network response was not ok');
                
                const csvText = await response.text();
                
                // 解析 CSV (台銀格式: 幣別,匯率...)
                // USD 通常在前面幾行。CSV 格式: 幣別, 現金買入, 現金賣出, ...
                const lines = csvText.split('\n');
                let usdRate = null;
                
                for (let line of lines) {
                    if (line.includes('USD') && line.includes('美金')) {
                        const columns = line.split(',');
                        // 欄位索引：0=幣別, 1=現金買入, 2=現金賣出 (根據台銀CSV結構)
                        usdRate = columns[2]; 
                        break;
                    }
                }

                if (usdRate) {
                    rateElement.innerText = parseFloat(usdRate).toFixed(2);
                    rateElement.classList.add('live-update'); // 加入閃爍特效
                    
                    // 取得當前時間
                    const now = new Date();
                    const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                                     now.getMinutes().toString().padStart(2, '0');
                    timeElement.innerHTML = `<i class="fa-solid fa-check-circle mr-1"></i> 已更新: ${timeString}`;
                } else {
                    throw new Error('USD not found');
                }
                
            } catch (error) {
                console.error('Fetch error:', error);
                rateElement.innerText = "點擊查詢";
                rateElement.style.fontSize = "1.5rem"; // 錯誤時縮小字體
                timeElement.innerHTML = `<i class="fa-solid fa-triangle-exclamation mr-1"></i> 無法自動載入，請點擊卡片`;
            }
        }

        // 頁面載入後執行
        window.addEventListener('load', fetchBotRate);
    </script>

</body>
</html>
